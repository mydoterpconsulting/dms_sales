{
 "creation": "2026-02-15 22:10:00.000000",
 "docstatus": 0,
 "doctype": "Client Script",
 "dt": "Car Stock Request",
 "enabled": 1,
 "idx": 0,
 "modified": "2026-02-15 22:10:00.000000",
 "modified_by": "amirul.zulkefli@mydotconsulting.com",
 "module": "DMS Sales",
 "name": "Filter SA Name",
 "owner": "amirul.zulkefli@mydotconsulting.com",
 "script": "frappe.ui.form.on('Car Stock Request', {\n    refresh: function(frm) {\n        // Add a trigger on the change of the Sales Advisor field\n        frm.fields_dict['sales_advisor'].get_query = function(doc, cdt, cdn) {\n            // Check if the user has the role \"Sales Advisor\"\n            var isSalesAdvisor = frappe.user_roles.includes('Sales Advisor');\n\n            // If the user has the role, filter sa_name based on user id\n            if (isSalesAdvisor) {\n                return {\n                    filters: {\n                        'email': frappe.session.user\n                    }\n                };\n            }\n        };\n    }\n});",
 "view": "Form"
}
